import{s as ve,h as J,r as we,n as Ee}from"../chunks/scheduler.9c0c050a.js";import{S as be,i as ye,g as c,s as D,m as Te,r as re,h as g,j as y,f as _,c as j,y as $e,n as Le,u as me,k as r,l as f,a as Ie,x as n,A as pe,v as oe,B as K,d as ce,t as ge,w as ue}from"../chunks/index.0d064376.js";import{I as _e}from"../chunks/Icon.7d205c32.js";import{T as Z}from"../chunks/Tileset.96cf75fd.js";function Me(o){let e,m,t,i,d,h,U,O,I,B,M,Q,w,G,v,s,a,b,N,fe="Name",ee,k,te,R,P,ae,ne,q,S,ie,V,z,X,se,x,Y,H,le,de;return S=new _e({props:{name:"gitMerge"}}),z=new _e({props:{name:"saveFloppyDisk"}}),{c(){e=c("div"),m=c("div"),t=c("label"),i=c("input"),d=D(),h=c("img"),O=D(),I=c("div"),B=c("label"),M=c("input"),Q=D(),w=c("img"),v=D(),s=c("div"),a=c("div"),b=c("div"),N=c("label"),N.textContent=fe,ee=D(),k=c("input"),te=D(),R=c("label"),P=c("input"),ae=Te(`
        Landscape`),ne=D(),q=c("button"),re(S.$$.fragment),ie=D(),V=c("button"),re(z.$$.fragment),se=D(),x=c("img"),this.h()},l(l){e=g(l,"DIV",{style:!0});var u=y(e);m=g(u,"DIV",{style:!0});var E=y(m);t=g(E,"LABEL",{for:!0});var A=y(t);i=g(A,"INPUT",{name:!0,type:!0,accept:!0}),A.forEach(_),d=j(E),h=g(E,"IMG",{class:!0,src:!0,alt:!0}),E.forEach(_),O=j(u),I=g(u,"DIV",{style:!0});var T=y(I);B=g(T,"LABEL",{for:!0});var C=y(B);M=g(C,"INPUT",{name:!0,type:!0,accept:!0}),C.forEach(_),Q=j(T),w=g(T,"IMG",{class:!0,src:!0,alt:!0}),T.forEach(_),v=j(u),s=g(u,"DIV",{style:!0});var $=y(s);a=g($,"DIV",{style:!0});var p=y(a);b=g(p,"DIV",{style:!0});var L=y(b);N=g(L,"LABEL",{for:!0,"data-svelte-h":!0}),$e(N)!=="svelte-bs9sy6"&&(N.textContent=fe),ee=j(L),k=g(L,"INPUT",{name:!0,type:!0}),L.forEach(_),te=j(p),R=g(p,"LABEL",{});var F=y(R);P=g(F,"INPUT",{type:!0}),ae=Le(F,`
        Landscape`),F.forEach(_),ne=j(p),q=g(p,"BUTTON",{});var W=y(q);me(S.$$.fragment,W),W.forEach(_),ie=j(p),V=g(p,"BUTTON",{});var he=y(V);me(z.$$.fragment,he),he.forEach(_),p.forEach(_),se=j($),x=g($,"IMG",{class:!0,src:!0,alt:!0}),$.forEach(_),u.forEach(_),this.h()},h(){var l,u,E,A,T,C,$,p,L;r(i,"name","left"),r(i,"type","file"),r(i,"accept","image/png"),r(t,"for","left"),r(h,"class","tileset-preview svelte-1hjkzx2"),J(h.src,U=((l=o[1])==null?void 0:l.img)instanceof HTMLImageElement?(E=(u=o[1])==null?void 0:u.img)==null?void 0:E.src:"")||r(h,"src",U),r(h,"alt","Left Tileset"),f(m,"display","flex"),f(m,"flex-direction","column"),r(M,"name","right"),r(M,"type","file"),r(M,"accept","image/png"),r(B,"for","right"),r(w,"class","tileset-preview svelte-1hjkzx2"),J(w.src,G=((A=o[2])==null?void 0:A.img)instanceof HTMLImageElement?(C=(T=o[2])==null?void 0:T.img)==null?void 0:C.src:"")||r(w,"src",G),r(w,"alt","Right Tileset"),f(I,"display","flex"),f(I,"flex-direction","column"),r(N,"for","name"),r(k,"name","name"),r(k,"type","text"),f(b,"display","flex"),f(b,"flex-direction","column"),f(b,"align-items","start"),r(P,"type","checkbox"),V.disabled=X=!o[3].img,f(a,"display","flex"),f(a,"flex-direction","row"),r(x,"class","tileset-preview svelte-1hjkzx2"),J(x.src,Y=(($=o[3])==null?void 0:$.img)instanceof HTMLImageElement?(L=(p=o[3])==null?void 0:p.img)==null?void 0:L.src:"")||r(x,"src",Y),r(x,"alt","Merged Tileset"),f(s,"display","flex"),f(s,"flex-direction","column"),f(e,"display","flex"),f(e,"gap","16px")},m(l,u){Ie(l,e,u),n(e,m),n(m,t),n(t,i),n(m,d),n(m,h),n(e,O),n(e,I),n(I,B),n(B,M),n(I,Q),n(I,w),n(e,v),n(e,s),n(s,a),n(a,b),n(b,N),n(b,ee),n(b,k),pe(k,o[3].name),n(a,te),n(a,R),n(R,P),P.checked=o[0],n(R,ae),n(a,ne),n(a,q),oe(S,q,null),n(a,ie),n(a,V),oe(z,V,null),n(s,se),n(s,x),H=!0,le||(de=[K(i,"change",o[7]),K(M,"change",o[8]),K(k,"input",o[9]),K(P,"change",o[10]),K(q,"click",o[11]),K(V,"click",o[6])],le=!0)},p(l,[u]){var E,A,T,C,$,p,L,F,W;(!H||u&2&&!J(h.src,U=((E=l[1])==null?void 0:E.img)instanceof HTMLImageElement?(T=(A=l[1])==null?void 0:A.img)==null?void 0:T.src:""))&&r(h,"src",U),(!H||u&4&&!J(w.src,G=((C=l[2])==null?void 0:C.img)instanceof HTMLImageElement?(p=($=l[2])==null?void 0:$.img)==null?void 0:p.src:""))&&r(w,"src",G),u&8&&k.value!==l[3].name&&pe(k,l[3].name),u&1&&(P.checked=l[0]),(!H||u&8&&X!==(X=!l[3].img))&&(V.disabled=X),(!H||u&8&&!J(x.src,Y=((L=l[3])==null?void 0:L.img)instanceof HTMLImageElement?(W=(F=l[3])==null?void 0:F.img)==null?void 0:W.src:""))&&r(x,"src",Y)},i(l){H||(ce(S.$$.fragment,l),ce(z.$$.fragment,l),H=!0)},o(l){ge(S.$$.fragment,l),ge(z.$$.fragment,l),H=!1},d(l){l&&_(e),ue(S),ue(z),le=!1,we(de)}}}function ke(o,e,m){let t=new Z({}),i=new Z({}),d=new Z({}),h=!0;function U(v){if(!t.img||!i.img)return;const s=document.createElement("canvas");v?(s.width=t.img.width+i.img.width+t.spacing,s.height=Math.max(t.img.height,i.img.height)):(s.width=Math.max(t.img.width,i.img.width),s.height=t.img.height+i.img.height+t.spacing);const a=s.getContext("2d");a&&(a.imageSmoothingEnabled=!1,a.resetTransform(),v?(a.drawImage(t.img,0,0),a.drawImage(i.img,t.img.width+t.spacing,0)):(a.drawImage(t.img,0,0),a.drawImage(i.img,0,t.img.height+t.spacing)),d.setImageFromDataURL(s.toDataURL()),Object.assign(d,Object.fromEntries(Object.entries(t).filter(([b,N])=>!["name","img"].includes(b)))))}function O(v){if(v.target===null)return;const s=v.target.files;if(s===null)return;const a=s[0];if(a)return Z.from(a)}function I(){d.download()}const B=v=>{var s;return(s=O(v))==null?void 0:s.then(a=>{m(1,t=a)})},M=v=>{var s;return(s=O(v))==null?void 0:s.then(a=>{m(2,i=a)})};function Q(){d.name=this.value,m(3,d)}function w(){h=this.checked,m(0,h)}const G=()=>U(h);return o.$$.update=()=>{o.$$.dirty&1&&U(h)},[h,t,i,d,U,O,I,B,M,Q,w,G]}class xe extends be{constructor(e){super(),ye(this,e,ke,Me,ve,{})}}function De(o){let e,m,t;return m=new xe({}),{c(){e=c("div"),re(m.$$.fragment),this.h()},l(i){e=g(i,"DIV",{style:!0});var d=y(e);me(m.$$.fragment,d),d.forEach(_),this.h()},h(){f(e,"display","flex"),f(e,"gap","16px"),f(e,"justify-content","space-between"),f(e,"width","100%")},m(i,d){Ie(i,e,d),oe(m,e,null),t=!0},p:Ee,i(i){t||(ce(m.$$.fragment,i),t=!0)},o(i){ge(m.$$.fragment,i),t=!1},d(i){i&&_(e),ue(m)}}}class Ve extends be{constructor(e){super(),ye(this,e,null,De,ve,{})}}export{Ve as component};
