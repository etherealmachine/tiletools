import{s as $e,n as dt,f as bt,r as vt,b as ke,h as Ze}from"../chunks/scheduler.37e983f9.js";import{S as et,i as tt,H as yt,e as ft,A as Tt,a as Ge,f as H,g as c,s as N,r as Te,h as p,j as Y,c as X,y as De,u as Le,k as w,l as d,B as Se,x as r,C as K,v as Ee,z as A,D as _e,d as Me,t as Ie,w as He,m as be,n as ye,o as Ke,E as Lt,F as Fe}from"../chunks/index.fbbb3e38.js";import{a as Et}from"../chunks/files.efb1155b.js";function ht(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const Mt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M19.4 20H9.6C9.26863 20 9 19.7314 9 19.4V9.6C9 9.26863 9.26863 9 9.6 9H19.4C19.7314 9 20 9.26863 20 9.6V19.4C20 19.7314 19.7314 20 19.4 20Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M15 9V4.6C15 4.26863 14.7314 4 14.4 4H4.6C4.26863 4 4 4.26863 4 4.6V14.4C4 14.7314 4.26863 15 4.6 15H9" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,It=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6 20L18 20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 4V16M12 16L15.5 12.5M12 16L8.5 12.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Ht=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.3632 5.65156L15.8431 4.17157C16.6242 3.39052 17.8905 3.39052 18.6716 4.17157L20.0858 5.58579C20.8668 6.36683 20.8668 7.63316 20.0858 8.41421L18.6058 9.8942M14.3632 5.65156L4.74749 15.2672C4.41542 15.5993 4.21079 16.0376 4.16947 16.5054L3.92738 19.2459C3.87261 19.8659 4.39148 20.3848 5.0115 20.33L7.75191 20.0879C8.21972 20.0466 8.65806 19.8419 8.99013 19.5099L18.6058 9.8942M14.3632 5.65156L18.6058 9.8942" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Vt=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M21 21L9 21" stroke="currentColor"  stroke-linecap="round" stroke-linejoin="round"/>
<path d="M15.889 14.8891L8.46436 7.46448" stroke="currentColor"  stroke-linecap="round" stroke-linejoin="round"/>
<path d="M2.8934 12.6066L12.0858 3.41421C12.8668 2.63317 14.1332 2.63317 14.9142 3.41421L19.864 8.36396C20.645 9.14501 20.645 10.4113 19.864 11.1924L10.6213 20.435C10.2596 20.7968 9.76894 21 9.25736 21C8.74577 21 8.25514 20.7968 7.8934 20.435L2.8934 15.435C2.11235 14.654 2.11235 13.3877 2.8934 12.6066Z" stroke="currentColor"  stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,jt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M21 12C19.1114 14.991 15.7183 18 12 18C8.2817 18 4.88856 14.991 3 12C5.29855 9.15825 7.99163 6 12 6C16.0084 6 18.7015 9.1582 21 12Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,St=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 3L21 21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M10.5 10.6771C10.1888 11.0296 10 11.4928 10 12C10 13.1045 10.8954 14 12 14C12.5072 14 12.9703 13.8112 13.3229 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7.36185 7.5611C5.68002 8.73968 4.27894 10.4188 3 12C4.88856 14.991 8.2817 18 12 18C13.5499 18 15.0434 17.4772 16.3949 16.6508" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 6C16.0084 6 18.7015 9.1582 21 12C20.6815 12.5043 20.3203 13.0092 19.922 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Bt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6 12H18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Dt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8 14.5714L6.17716 12.8354C5.53522 12.224 4.51329 12.2705 3.92953 12.9377V12.9377C3.40196 13.5406 3.41749 14.4453 3.96544 15.0298L9.90739 21.3679C10.2855 21.7712 10.8127 22 11.3655 22C12.4505 22 14.2343 22 16 22C18.4 22 20 20 20 18C20 18 20 18 20 18C20 18 20 11.1429 20 9.42859" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17 9.99995C17 9.99995 17 9.87483 17 9.42852C17 7.1428 20 7.1428 20 9.42852" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M14 9.99998C14 9.99998 14 9.17832 14 8.2857C14 5.99998 17 5.99998 17 8.2857C17 8.50885 17 9.2054 17 9.42855C17 9.87487 17 9.99998 17 9.99998" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M11 10.0001C11 10.0001 11 8.61584 11 7.50005C11 5.21434 14 5.21434 14 7.50005C14 7.50005 14 7.50005 14 7.50005C14 7.50005 14 8.06261 14 8.28577C14 9.17839 14 10.0001 14 10.0001" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M8 14.5714V3.5C8 2.67157 8.67157 2 9.5 2V2C10.3284 2 11 2.67056 11 3.49899C11 4.68968 11 6.34156 11 7.5C11 8.61578 11 10 11 10" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,At=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8.5 4H6C4.89543 4 4 4.89543 4 6V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V6C20 4.89543 19.1046 4 18 4H15.5" stroke="currentColor"  stroke-linecap="round"/>
<path d="M8 6.4V4.5C8 4.22386 8.22386 4 8.5 4C8.77614 4 9.00422 3.77604 9.05152 3.50398C9.19968 2.65171 9.77399 1 12 1C14.226 1 14.8003 2.65171 14.9485 3.50398C14.9958 3.77604 15.2239 4 15.5 4C15.7761 4 16 4.22386 16 4.5V6.4C16 6.73137 15.7314 7 15.4 7H8.6C8.26863 7 8 6.73137 8 6.4Z" stroke="currentColor"  stroke-linecap="round"/>
</svg>
`,Nt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6 12H12M18 12H12M12 12V6M12 12V18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Xt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 19V5C3 3.89543 3.89543 3 5 3H16.1716C16.702 3 17.2107 3.21071 17.5858 3.58579L20.4142 6.41421C20.7893 6.78929 21 7.29799 21 7.82843V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M8.6 9H15.4C15.7314 9 16 8.73137 16 8.4V3.6C16 3.26863 15.7314 3 15.4 3H8.6C8.26863 3 8 3.26863 8 3.6V8.4C8 8.73137 8.26863 9 8.6 9Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M6 13.6V21H18V13.6C18 13.2686 17.7314 13 17.4 13H6.6C6.26863 13 6 13.2686 6 13.6Z" stroke="currentColor" stroke-width="1.5"/>
</svg>
`,Yt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M19.6224 10.3954L18.5247 7.7448L20 6L18 4L16.2647 5.48295L13.5578 4.36974L12.9353 2H10.981L10.3491 4.40113L7.70441 5.51596L6 4L4 6L5.45337 7.78885L4.3725 10.4463L2 11V13L4.40111 13.6555L5.51575 16.2997L4 18L6 20L7.79116 18.5403L10.397 19.6123L11 22H13L13.6045 19.6132L16.2551 18.5155C16.6969 18.8313 18 20 18 20L20 18L18.5159 16.2494L19.6139 13.598L21.9999 12.9772L22 11L19.6224 10.3954Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Wt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6 20L18 20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 16V4M12 4L15.5 7.5M12 4L8.5 7.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;function Ut(t){let n,e=t[1][t[0]]+"",i;return{c(){n=new yt(!1),i=ft(),this.h()},l(l){n=Tt(l,!1),i=ft(),this.h()},h(){n.a=i},m(l,a){n.m(e,l,a),Ge(l,i,a)},p(l,[a]){a&1&&e!==(e=l[1][l[0]]+"")&&n.p(e)},i:dt,o:dt,d(l){l&&(H(i),n.d())}}}function Pt(t,n,e){const i={copy:Mt,download:It,editPencil:Ht,erase:Vt,eyeEmpty:jt,eyeOff:St,minus:Bt,openSelectHandGesture:Dt,pasteClipboard:At,plus:Nt,saveFloppyDisk:Xt,settings:Yt,upload:Wt};let{name:l}=n;return t.$$set=a=>{"name"in a&&e(0,l=a.name)},[l,i]}class Be extends et{constructor(n){super(),tt(this,n,Pt,Ut,$e,{name:0})}}const Qe="data:image/png;base64,",xt=String.fromCharCode(137,80,78,71,13,10,26,10),Ct="tEXt";function Ot(t){for(let n of _t(t))if(kt(n))return JSON.parse(n.data)}function Zt(t,n){const e=_t(t),i=e.findIndex(kt),l={type:Ct,data:JSON.stringify(n)};return i===-1?e.splice(1,0,l):e[i]=l,Ft(e)}function kt(t){return t.type===Ct&&t.data.startsWith("{")&&t.data.endsWith("}")}function _t(t){t=t.substring(8);const n=[];for(;t!=="";){let e=Gt(t.substring(0,4));e<0&&(e=0);const i=t.substring(0,e+12);t=t.substring(e+12);const l=i.substring(4,8);let a="";e>0&&(a=i.substring(8,e+8)),n.push({type:l,data:a})}return n}function Ft(t){let n=xt;for(let e of t){let i=ct(e.data.length,4);i+=e.type,i+=e.data,i+=ct(qt(e.type+e.data),4),n+=i}return n}function ct(t,n){for(var e=[],i=n-1;i>=0;){var l=t&255;e[i--]=l,t=t>>8}return e=e.map(function(a){return String.fromCharCode(a)}),e.join("")}function Gt(t){for(var n=0,e=0;e<t.length;e++){var i=t.charCodeAt(e);n=n<<8|i&255}return n}function qt(t){for(var n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],e=-1,i=0;i<t.length;i++)e=e>>>8^n[(e^t.charCodeAt(i))&255];return(e^-1)>>>0}function pt(t,n,e){const i=t.slice();return i[17]=n[e],i}function gt(t){let n,e,i,l,a,b,V,y,k,z,h,g,W="Tags",x,s,M,v,O,q,$,D,R=ht(t[16]),C=[];for(let m=0;m<R.length;m+=1)C[m]=mt(pt(t,R,m));return{c(){n=c("div"),e=c("div"),i=be("Selected: Tile "),l=be(t[12]),a=be(" ("),b=be(t[3]),V=be(", "),y=be(t[4]),k=be(")"),z=N(),h=c("div"),g=c("label"),g.textContent=W,x=N(),s=c("input"),M=N(),v=c("input"),O=N(),q=c("div");for(let m=0;m<C.length;m+=1)C[m].c();this.h()},l(m){n=p(m,"DIV",{style:!0});var T=Y(n);e=p(T,"DIV",{});var u=Y(e);i=ye(u,"Selected: Tile "),l=ye(u,t[12]),a=ye(u," ("),b=ye(u,t[3]),V=ye(u,", "),y=ye(u,t[4]),k=ye(u,")"),u.forEach(H),z=X(T),h=p(T,"DIV",{style:!0});var L=Y(h);g=p(L,"LABEL",{for:!0,"data-svelte-h":!0}),De(g)!=="svelte-e2ajgy"&&(g.textContent=W),x=X(L),s=p(L,"INPUT",{name:!0,type:!0}),L.forEach(H),M=X(T),v=p(T,"INPUT",{type:!0,name:!0}),O=X(T),q=p(T,"DIV",{style:!0});var ee=Y(q);for(let Z=0;Z<C.length;Z+=1)C[Z].l(ee);ee.forEach(H),T.forEach(H),this.h()},h(){w(g,"for","tags"),w(s,"name","tags"),w(s,"type","text"),d(h,"display","flex"),d(h,"flex-direction","column"),d(h,"align-items","start"),w(v,"type","color"),w(v,"name","color"),d(q,"display","flex"),d(q,"flex-direction","row"),d(q,"flex-wrap","wrap"),d(q,"gap","12px"),d(n,"display","flex"),d(n,"flex-direction","row"),d(n,"gap","8px"),d(n,"align-items","start")},m(m,T){Ge(m,n,T),r(n,e),r(e,i),r(e,l),r(e,a),r(e,b),r(e,V),r(e,y),r(e,k),r(n,z),r(n,h),r(h,g),r(h,x),r(h,s),K(s,t[14]),t[46](s),r(n,M),r(n,v),K(v,t[17]),r(n,O),r(n,q);for(let u=0;u<C.length;u+=1)C[u]&&C[u].m(q,null);$||(D=[A(s,"change",t[22]),A(s,"input",t[45]),A(v,"input",t[47])],$=!0)},p(m,T){if(T[0]&4096&&Ke(l,m[12]),T[0]&8&&Ke(b,m[3]),T[0]&16&&Ke(y,m[4]),T[0]&16384&&s.value!==m[14]&&K(s,m[14]),T[0]&131072&&K(v,m[17]),T[0]&65536){R=ht(m[16]);let u;for(u=0;u<R.length;u+=1){const L=pt(m,R,u);C[u]?C[u].p(L,T):(C[u]=mt(L),C[u].c(),C[u].m(q,null))}for(;u<C.length;u+=1)C[u].d(1);C.length=R.length}},d(m){m&&H(n),t[46](null),Lt(C,m),$=!1,vt(D)}}}function mt(t){let n;return{c(){n=c("button"),this.h()},l(e){n=p(e,"BUTTON",{class:!0}),Y(n).forEach(H),this.h()},h(){w(n,"class","palette"),d(n,"background-color",t[17])},m(e,i){Ge(e,n,i)},p(e,i){i[0]&65536&&d(n,"background-color",e[17])},d(e){e&&H(n)}}}function Rt(t){let n,e,i,l,a,b,V="Name",y,k,z,h,g,W="Width",x,s,M,v,O,q="Height",$,D,R,C,m,T="Margin",u,L,ee,Z,oe,Ae="Spacing",re,J,Ne,P,le,he,Xe,se,ce,Ye,ae,pe,We,ve,ge,Ue,Ce,me,Pe,ue,we,Ve,xe,de,ne,Oe,fe,qe,o,E,j,F,S,_,U;he=new Be({props:{name:"openSelectHandGesture"}}),ce=new Be({props:{name:"editPencil"}}),pe=new Be({props:{name:"erase"}}),ge=new Be({props:{name:"copy"}}),me=new Be({props:{name:"pasteClipboard"}}),we=new Be({props:{name:"saveFloppyDisk"}});let B=t[3]!==void 0&&t[4]!==void 0&&gt(t);return{c(){n=c("div"),e=c("div"),i=c("input"),l=N(),a=c("div"),b=c("label"),b.textContent=V,y=N(),k=c("input"),z=N(),h=c("div"),g=c("label"),g.textContent=W,x=N(),s=c("input"),M=N(),v=c("div"),O=c("label"),O.textContent=q,$=N(),D=c("input"),R=N(),C=c("div"),m=c("label"),m.textContent=T,u=N(),L=c("input"),ee=N(),Z=c("div"),oe=c("label"),oe.textContent=Ae,re=N(),J=c("input"),Ne=N(),P=c("div"),le=c("button"),Te(he.$$.fragment),Xe=N(),se=c("button"),Te(ce.$$.fragment),Ye=N(),ae=c("button"),Te(pe.$$.fragment),We=N(),ve=c("button"),Te(ge.$$.fragment),Ue=N(),Ce=c("button"),Te(me.$$.fragment),Pe=N(),ue=c("button"),Te(we.$$.fragment),xe=N(),de=c("div"),ne=c("input"),Oe=N(),fe=c("img"),o=N(),E=c("div"),j=c("canvas"),F=N(),B&&B.c(),this.h()},l(f){n=p(f,"DIV",{style:!0});var I=Y(n);e=p(I,"DIV",{style:!0});var G=Y(e);i=p(G,"INPUT",{type:!0,accept:!0}),l=X(G),a=p(G,"DIV",{style:!0});var te=Y(a);b=p(te,"LABEL",{for:!0,"data-svelte-h":!0}),De(b)!=="svelte-bs9sy6"&&(b.textContent=V),y=X(te),k=p(te,"INPUT",{name:!0,type:!0}),te.forEach(H),z=X(G),h=p(G,"DIV",{style:!0});var je=Y(h);g=p(je,"LABEL",{for:!0,"data-svelte-h":!0}),De(g)!=="svelte-17m14b6"&&(g.textContent=W),x=X(je),s=p(je,"INPUT",{name:!0,type:!0,min:!0,max:!0,style:!0}),je.forEach(H),M=X(G),v=p(G,"DIV",{style:!0});var Re=Y(v);O=p(Re,"LABEL",{for:!0,"data-svelte-h":!0}),De(O)!=="svelte-1bbixbe"&&(O.textContent=q),$=X(Re),D=p(Re,"INPUT",{name:!0,type:!0,min:!0,max:!0,style:!0}),Re.forEach(H),R=X(G),C=p(G,"DIV",{style:!0});var ze=Y(C);m=p(ze,"LABEL",{for:!0,"data-svelte-h":!0}),De(m)!=="svelte-115t4ma"&&(m.textContent=T),u=X(ze),L=p(ze,"INPUT",{name:!0,type:!0,min:!0,max:!0,style:!0}),ze.forEach(H),ee=X(G),Z=p(G,"DIV",{style:!0});var Je=Y(Z);oe=p(Je,"LABEL",{for:!0,"data-svelte-h":!0}),De(oe)!=="svelte-4aewk"&&(oe.textContent=Ae),re=X(Je),J=p(Je,"INPUT",{name:!0,type:!0,min:!0,max:!0,style:!0}),Je.forEach(H),Ne=X(G),P=p(G,"DIV",{style:!0});var ie=Y(P);le=p(ie,"BUTTON",{});var nt=Y(le);Le(he.$$.fragment,nt),nt.forEach(H),Xe=X(ie),se=p(ie,"BUTTON",{});var it=Y(se);Le(ce.$$.fragment,it),it.forEach(H),Ye=X(ie),ae=p(ie,"BUTTON",{});var ot=Y(ae);Le(pe.$$.fragment,ot),ot.forEach(H),We=X(ie),ve=p(ie,"BUTTON",{});var rt=Y(ve);Le(ge.$$.fragment,rt),rt.forEach(H),Ue=X(ie),Ce=p(ie,"BUTTON",{});var lt=Y(Ce);Le(me.$$.fragment,lt),lt.forEach(H),Pe=X(ie),ue=p(ie,"BUTTON",{});var st=Y(ue);Le(we.$$.fragment,st),st.forEach(H),ie.forEach(H),G.forEach(H),xe=X(I),de=p(I,"DIV",{style:!0});var at=Y(de);ne=p(at,"INPUT",{name:!0,type:!0,placeholder:!0}),at.forEach(H),Oe=X(I),fe=p(I,"IMG",{src:!0,style:!0,alt:!0}),o=X(I),E=p(I,"DIV",{class:!0});var ut=Y(E);j=p(ut,"CANVAS",{style:!0}),Y(j).forEach(H),ut.forEach(H),F=X(I),B&&B.l(I),I.forEach(H),this.h()},h(){w(i,"type","file"),w(i,"accept","image/png"),w(b,"for","name"),w(k,"name","name"),w(k,"type","text"),d(a,"display","flex"),d(a,"flex-direction","column"),d(a,"align-items","start"),w(g,"for","width"),w(s,"name","width"),w(s,"type","number"),w(s,"min","1"),w(s,"max","64"),d(s,"max-width","4em"),d(h,"display","flex"),d(h,"flex-direction","column"),d(h,"align-items","start"),w(O,"for","height"),w(D,"name","height"),w(D,"type","number"),w(D,"min","1"),w(D,"max","64"),d(D,"max-width","4em"),d(v,"display","flex"),d(v,"flex-direction","column"),d(v,"align-items","start"),w(m,"for","Margin"),w(L,"name","margin"),w(L,"type","number"),w(L,"min","1"),w(L,"max","64"),d(L,"max-width","4em"),d(C,"display","flex"),d(C,"flex-direction","column"),d(C,"align-items","start"),w(oe,"for","Spacing"),w(J,"name","spacing"),w(J,"type","number"),w(J,"min","1"),w(J,"max","64"),d(J,"max-width","4em"),d(Z,"display","flex"),d(Z,"flex-direction","column"),d(Z,"align-items","start"),Se(le,"active",t[15]===Q.Select),Se(se,"active",t[15]===Q.Edit),Se(ae,"active",t[15]===Q.Erase),ue.disabled=Ve=!t[0]||!t[0].src,d(P,"margin-left","auto"),d(P,"display","flex"),d(P,"gap","8px"),d(e,"display","flex"),d(e,"gap","8px"),d(e,"align-items","end"),w(ne,"name","filter"),w(ne,"type","text"),w(ne,"placeholder","Filter"),d(de,"display","flex"),d(de,"gap","8px"),d(de,"align-items","end"),bt(fe.src,qe="")||w(fe,"src",qe),d(fe,"display","none"),w(fe,"alt","Tileset"),d(j,"position","absolute"),w(E,"class","canvas svelte-16cu0gi"),d(n,"display","flex"),d(n,"flex-direction","column"),d(n,"gap","8px"),d(n,"flex-grow","1")},m(f,I){Ge(f,n,I),r(n,e),r(e,i),r(e,l),r(e,a),r(a,b),r(a,y),r(a,k),K(k,t[13]),r(e,z),r(e,h),r(h,g),r(h,x),r(h,s),K(s,t[1]),r(e,M),r(e,v),r(v,O),r(v,$),r(v,D),K(D,t[2]),r(e,R),r(e,C),r(C,m),r(C,u),r(C,L),K(L,t[5]),r(e,ee),r(e,Z),r(Z,oe),r(Z,re),r(Z,J),K(J,t[6]),r(e,Ne),r(e,P),r(P,le),Ee(he,le,null),r(P,Xe),r(P,se),Ee(ce,se,null),r(P,Ye),r(P,ae),Ee(pe,ae,null),r(P,We),r(P,ve),Ee(ge,ve,null),r(P,Ue),r(P,Ce),Ee(me,Ce,null),r(P,Pe),r(P,ue),Ee(we,ue,null),r(n,xe),r(n,de),r(de,ne),K(ne,t[7]),r(n,Oe),r(n,fe),t[39](fe),r(n,o),r(n,E),r(E,j),t[40](j),r(n,F),B&&B.m(n,null),S=!0,_||(U=[A(window,"keydown",t[24]),A(i,"change",t[21]),A(k,"input",t[30]),A(s,"input",t[31]),A(D,"input",t[32]),A(L,"input",t[33]),A(J,"input",t[34]),A(le,"click",t[35]),A(se,"click",t[36]),A(ae,"click",t[37]),A(ve,"click",zt),A(Ce,"click",Jt),A(ue,"click",t[23]),A(ne,"input",t[38]),A(j,"wheel",t[18]),A(j,"click",t[19]),A(j,"pointermove",t[20]),A(j,"pointerdown",t[41]),A(j,"pointerup",t[42]),A(j,"pointerenter",t[43]),A(j,"pointerleave",t[44])],_=!0)},p(f,I){I[0]&8192&&k.value!==f[13]&&K(k,f[13]),I[0]&2&&_e(s.value)!==f[1]&&K(s,f[1]),I[0]&4&&_e(D.value)!==f[2]&&K(D,f[2]),I[0]&32&&_e(L.value)!==f[5]&&K(L,f[5]),I[0]&64&&_e(J.value)!==f[6]&&K(J,f[6]),(!S||I[0]&32768)&&Se(le,"active",f[15]===Q.Select),(!S||I[0]&32768)&&Se(se,"active",f[15]===Q.Edit),(!S||I[0]&32768)&&Se(ae,"active",f[15]===Q.Erase),(!S||I[0]&1&&Ve!==(Ve=!f[0]||!f[0].src))&&(ue.disabled=Ve),I[0]&128&&ne.value!==f[7]&&K(ne,f[7]),f[3]!==void 0&&f[4]!==void 0?B?B.p(f,I):(B=gt(f),B.c(),B.m(n,null)):B&&(B.d(1),B=null)},i(f){S||(Me(he.$$.fragment,f),Me(ce.$$.fragment,f),Me(pe.$$.fragment,f),Me(ge.$$.fragment,f),Me(me.$$.fragment,f),Me(we.$$.fragment,f),S=!0)},o(f){Ie(he.$$.fragment,f),Ie(ce.$$.fragment,f),Ie(pe.$$.fragment,f),Ie(ge.$$.fragment,f),Ie(me.$$.fragment,f),Ie(we.$$.fragment,f),S=!1},d(f){f&&H(n),He(he),He(ce),He(pe),He(ge),He(me),He(we),t[39](null),t[40](null),B&&B.d(),_=!1,vt(U)}}}var Q=(t=>(t[t.Select=0]="Select",t[t.Edit=1]="Edit",t[t.Erase=2]="Erase",t))(Q||{});function wt(t,n,e,i,l){t.beginPath(),t.lineTo(n,e),t.lineTo(n+i,e),t.lineTo(n+i,e+l),t.lineTo(n,e+l),t.closePath(),t.stroke()}function zt(){}function Jt(){}function Kt(t,n,e){let{tileset:i}=n,{tileWidth:l,tileHeight:a}=n,{margin:b=0}=n,{spacing:V=0}=n,{selectedTileX:y,selectedTileY:k}=n,z,h,g=2,W=!1,x=!1,s=0,M=0,v,O,q,$,D,R,C={},m,T=Q.Select,u,L,ee="#ffffff",Z=new Set;function oe(o,E){return[(o-s)/g,(E-M)/g]}function Ae(o,E){return!l||!a?[0,0]:[Math.floor((o-b)/(l+V)),Math.floor((E-b)/(a+V))]}function re(o,E){return!l||!a?[0,0]:[o*(l+V)+b,E*(a+V)+b]}function J(){var F,S;if(!h)return;const o=h.getContext("2d");if(!o)return;const E=(((F=h.parentElement)==null?void 0:F.scrollWidth)||0)-4,j=(((S=h.parentElement)==null?void 0:S.scrollHeight)||0)-4;if(e(9,h.width=E,h),e(9,h.height=j,h),o.imageSmoothingEnabled=!1,o.resetTransform(),o.clearRect(0,0,E,j),o.setTransform(g,0,0,g,s,M),L?o.drawImage(L,0,0,L.width,L.height):i&&i.complete&&u&&(createImageBitmap(u).then(_=>{L=_}),requestAnimationFrame(J)),!(v===void 0||O===void 0)){if((T===Q.Edit||T===Q.Erase)&&x&&y!==void 0&&k!==void 0&&l&&a){const _=Math.floor(v),U=Math.floor(O),[B,f]=re(y,k),[I,G]=re(y+1,k+1);if(_>=0&&_<u.width&&U>=0&&U<u.height&&_>=B&&_<I&&U>=f&&U<G){const te=(U*u.width+_)*4;T===Q.Edit?(u.data[te+0]=parseInt(ee.slice(1,3),16),u.data[te+1]=parseInt(ee.slice(3,5),16),u.data[te+2]=parseInt(ee.slice(5,7),16),u.data[te+3]=255):(u.data[te+0]=0,u.data[te+1]=0,u.data[te+2]=0,u.data[te+3]=0),createImageBitmap(u).then(je=>{L=je})}}if(o.strokeStyle="white",o.lineWidth=1,l!==void 0&&a!==void 0){if(T===Q.Select){const[_,U]=Ae(v,O),[B,f]=re(_,U),[I,G]=re(_+1,U+1);_!=null&&U!==void 0&&wt(o,B,f,I-B,G-f)}if(y!==void 0&&k!==void 0){const[_,U]=re(y,k),[B,f]=re(y+1,k+1);wt(o,_,U,B-_,f-U)}}}}function Ne(o){const E=g;o.deltaY<0?e(25,g*=1.1):o.deltaY>0&&e(25,g*=.9),e(25,g=Math.min(Math.max(.05,g),16)),e(26,s=-g*(o.offsetX-s)/E+o.offsetX),e(27,M=-g*(o.offsetY-M)/E+o.offsetY)}function P(o){if(T!==Q.Select)return;const[E,j]=oe(o.offsetX,o.offsetY);if(!(E<0||E>=i.width||j<0||j>=i.height)&&l!==void 0&&a!==void 0&&q!==void 0){e(3,[y,k]=Ae(E,j),y,e(4,k)),e(12,$=k*q+y),e(14,R=C[$]||""),z.focus(),Z.clear();for(let F=y*l;F<(y+1)*l;F++)for(let S=k*a;S<(k+1)*a;S++){const _=(S*u.width+F)*4;Z.add("#"+u.data[_+0].toString(16)+u.data[_+1].toString(16)+u.data[_+2].toString(16))}e(16,Z)}}function le(o){o.buttons===1?P(o):o.ctrlKey&&(e(26,s+=o.movementX),e(27,M+=o.movementY)),l!==void 0&&a!==void 0&&e(28,[v,O]=oe(o.offsetX,o.offsetY),v,e(29,O))}function he(o){if(o.target===null)return;const E=o.target.files;if(E===null)return;const j=E[0];j&&Et(j).then(F=>{i.setAttribute("src",Qe+btoa(F)),e(0,i.onload=()=>{const _=document.createElement("canvas");_.width=i.width,_.height=i.height;const U=h.getContext("2d");U&&(U.resetTransform(),U.drawImage(i,0,0,_.width,_.height),u=U.getImageData(0,0,_.width,_.height),createImageBitmap(u).then(B=>{L=B}))},i),e(13,D=""),e(1,l=void 0),e(2,a=void 0),e(5,b=0),e(6,V=0),e(14,R=""),C={},e(3,y=0),e(4,k=0),e(12,$=0),e(26,s=0),e(27,M=0),e(25,g=2);const S=Ot(F);S&&(e(13,D=S.name||""),e(1,l=S.tilewidth),e(2,a=S.tileheight),e(5,b=S.margin||0),e(6,V=S.spacing||0),C=Object.fromEntries(Object.entries(S.tiledata).map(([_,U])=>[_,U.tags.join(",")])))})}function Xe(){$!==void 0&&(C[$]=R)}function se(){const o=document.createElement("canvas");o.width=L.width,o.height=L.height;const E=o.getContext("2d");if(!E)return;E.imageSmoothingEnabled=!1,E.resetTransform(),E.drawImage(L,0,0);const j=Zt(atob(o.toDataURL("image/png").substring(Qe.length)),{name:D,type:"hex",tilewidth:l,tileheight:a,margin:b,spacing:V,tileoffset:{x:0,y:0},tiledata:Object.fromEntries(Object.entries(C).map(([S,_])=>[S,{tags:_.split(",")}]))});i.setAttribute("src",Qe+btoa(j));const F=document.createElement("a");F.href=i.src,D?F.download=`${D}.png`:F.download="tileset.png",F.click()}function ce(...o){i&&l!==void 0&&a!==void 0&&(q=i.width/l,i.height/a),i&&i.complete&&requestAnimationFrame(J)}function Ye(o){if(W&&!(l===void 0||a===void 0)){switch(o.key){case"ArrowLeft":e(26,s+=g*l),o.preventDefault();break;case"ArrowRight":e(26,s-=g*l),o.preventDefault();break;case"ArrowUp":e(27,M+=g*a),o.preventDefault();break;case"ArrowDown":e(27,M-=g*a),o.preventDefault();break}requestAnimationFrame(J)}}function ae(){D=this.value,e(13,D)}function pe(){l=_e(this.value),e(1,l)}function We(){a=_e(this.value),e(2,a)}function ve(){b=_e(this.value),e(5,b)}function ge(){V=_e(this.value),e(6,V)}const Ue=()=>{e(15,T=Q.Select)},Ce=()=>{e(15,T=Q.Edit)},me=()=>{e(15,T=Q.Erase)};function Pe(){m=this.value,e(7,m)}function ue(o){ke[o?"unshift":"push"](()=>{i=o,e(0,i)})}function we(o){ke[o?"unshift":"push"](()=>{h=o,e(9,h)})}const Ve=()=>{e(11,x=!0)},xe=()=>{e(11,x=!1)},de=()=>{h.focus(),e(10,W=!0)},ne=()=>{e(10,W=!1)};function Oe(){R=this.value,e(14,R)}function fe(o){ke[o?"unshift":"push"](()=>{z=o,e(8,z)})}function qe(){ee=this.value,e(17,ee)}return t.$$set=o=>{"tileset"in o&&e(0,i=o.tileset),"tileWidth"in o&&e(1,l=o.tileWidth),"tileHeight"in o&&e(2,a=o.tileHeight),"margin"in o&&e(5,b=o.margin),"spacing"in o&&e(6,V=o.spacing),"selectedTileX"in o&&e(3,y=o.selectedTileX),"selectedTileY"in o&&e(4,k=o.selectedTileY)},t.$$.update=()=>{t.$$.dirty[0]&1040187551&&ce(i,l,a,g,s,M,m,v,O,y,k)},[i,l,a,y,k,b,V,m,z,h,W,x,$,D,R,T,Z,ee,Ne,P,le,he,Xe,se,Ye,g,s,M,v,O,ae,pe,We,ve,ge,Ue,Ce,me,Pe,ue,we,Ve,xe,de,ne,Oe,fe,qe]}class Qt extends et{constructor(n){super(),tt(this,n,Kt,Rt,$e,{tileset:0,tileWidth:1,tileHeight:2,margin:5,spacing:6,selectedTileX:3,selectedTileY:4},null,[-1,-1])}}function $t(t){let n,e,i,l,a,b,V,y;function k(s){t[5](s)}function z(s){t[6](s)}function h(s){t[7](s)}function g(s){t[8](s)}function W(s){t[9](s)}let x={};return t[0]!==void 0&&(x.tileset=t[0]),t[1]!==void 0&&(x.tileWidth=t[1]),t[2]!==void 0&&(x.tileHeight=t[2]),t[3]!==void 0&&(x.selectedTileX=t[3]),t[4]!==void 0&&(x.selectedTileY=t[4]),e=new Qt({props:x}),ke.push(()=>Fe(e,"tileset",k)),ke.push(()=>Fe(e,"tileWidth",z)),ke.push(()=>Fe(e,"tileHeight",h)),ke.push(()=>Fe(e,"selectedTileX",g)),ke.push(()=>Fe(e,"selectedTileY",W)),{c(){n=c("div"),Te(e.$$.fragment),this.h()},l(s){n=p(s,"DIV",{style:!0});var M=Y(n);Le(e.$$.fragment,M),M.forEach(H),this.h()},h(){d(n,"display","flex"),d(n,"gap","16px"),d(n,"justify-content","space-between"),d(n,"width","100%")},m(s,M){Ge(s,n,M),Ee(e,n,null),y=!0},p(s,[M]){const v={};!i&&M&1&&(i=!0,v.tileset=s[0],Ze(()=>i=!1)),!l&&M&2&&(l=!0,v.tileWidth=s[1],Ze(()=>l=!1)),!a&&M&4&&(a=!0,v.tileHeight=s[2],Ze(()=>a=!1)),!b&&M&8&&(b=!0,v.selectedTileX=s[3],Ze(()=>b=!1)),!V&&M&16&&(V=!0,v.selectedTileY=s[4],Ze(()=>V=!1)),e.$set(v)},i(s){y||(Me(e.$$.fragment,s),y=!0)},o(s){Ie(e.$$.fragment,s),y=!1},d(s){s&&H(n),He(e)}}}function e1(t,n,e){let i,l,a,b,V;function y(W){i=W,e(0,i)}function k(W){l=W,e(1,l)}function z(W){a=W,e(2,a)}function h(W){b=W,e(3,b)}function g(W){V=W,e(4,V)}return[i,l,a,b,V,y,k,z,h,g]}class o1 extends et{constructor(n){super(),tt(this,n,e1,$t,$e,{})}}export{o1 as component};
