import{s as ye,h as q,r as Ie,i as he,n as $e}from"../chunks/scheduler.b8ee1aee.js";import{S as be,i as we,g as l,s as M,m as Te,r as re,h as o,j as b,f as y,c as j,y as ke,n as Le,u as le,k as r,l as u,a as Ee,x as a,A as _e,v as oe,B as R,d as ce,t as me,w as ue}from"../chunks/index.b64d0558.js";import{I as ve,T as X}from"../chunks/Tileset.1671e2a1.js";function De(e){let i,s,t,n,c,f,B,H,w,N,k,J,p,h,_,v,d,E,C,ge="Name",Y,L,Z,F,O,ee,te,G,P,ie,U,S,K,ae,D,Q,V,ne,fe;return P=new ve({props:{name:"gitMerge"}}),S=new ve({props:{name:"saveFloppyDisk"}}),{c(){i=l("div"),s=l("div"),t=l("label"),n=l("input"),c=M(),f=l("img"),H=M(),w=l("div"),N=l("label"),k=l("input"),J=M(),p=l("img"),_=M(),v=l("div"),d=l("div"),E=l("div"),C=l("label"),C.textContent=ge,Y=M(),L=l("input"),Z=M(),F=l("label"),O=l("input"),ee=Te(`
        Landscape`),te=M(),G=l("button"),re(P.$$.fragment),ie=M(),U=l("button"),re(S.$$.fragment),ae=M(),D=l("img"),this.h()},l(g){i=o(g,"DIV",{style:!0});var m=b(i);s=o(m,"DIV",{style:!0});var $=b(s);t=o($,"LABEL",{for:!0});var x=b(t);n=o(x,"INPUT",{name:!0,type:!0,accept:!0}),x.forEach(y),c=j($),f=o($,"IMG",{class:!0,src:!0,alt:!0}),$.forEach(y),H=j(m),w=o(m,"DIV",{style:!0});var T=b(w);N=o(T,"LABEL",{for:!0});var A=b(N);k=o(A,"INPUT",{name:!0,type:!0,accept:!0}),A.forEach(y),J=j(T),p=o(T,"IMG",{class:!0,src:!0,alt:!0}),T.forEach(y),_=j(m),v=o(m,"DIV",{style:!0});var z=b(v);d=o(z,"DIV",{style:!0});var I=b(d);E=o(I,"DIV",{style:!0});var W=b(E);C=o(W,"LABEL",{for:!0,"data-svelte-h":!0}),ke(C)!=="svelte-bs9sy6"&&(C.textContent=ge),Y=j(W),L=o(W,"INPUT",{name:!0,type:!0}),W.forEach(y),Z=j(I),F=o(I,"LABEL",{});var se=b(F);O=o(se,"INPUT",{type:!0}),ee=Le(se,`
        Landscape`),se.forEach(y),te=j(I),G=o(I,"BUTTON",{});var de=b(G);le(P.$$.fragment,de),de.forEach(y),ie=j(I),U=o(I,"BUTTON",{});var pe=b(U);le(S.$$.fragment,pe),pe.forEach(y),I.forEach(y),ae=j(z),D=o(z,"IMG",{class:!0,src:!0,alt:!0}),z.forEach(y),m.forEach(y),this.h()},h(){var g,m,$,x,T,A;r(n,"name","left"),r(n,"type","file"),r(n,"accept","image/png"),r(t,"for","left"),r(f,"class","tileset-preview svelte-1hjkzx2"),q(f.src,B=(m=(g=e[1])==null?void 0:g.img)==null?void 0:m.src)||r(f,"src",B),r(f,"alt","Left Tileset"),u(s,"display","flex"),u(s,"flex-direction","column"),r(k,"name","right"),r(k,"type","file"),r(k,"accept","image/png"),r(N,"for","right"),r(p,"class","tileset-preview svelte-1hjkzx2"),q(p.src,h=(x=($=e[2])==null?void 0:$.img)==null?void 0:x.src)||r(p,"src",h),r(p,"alt","Right Tileset"),u(w,"display","flex"),u(w,"flex-direction","column"),r(C,"for","name"),r(L,"name","name"),r(L,"type","text"),u(E,"display","flex"),u(E,"flex-direction","column"),u(E,"align-items","start"),r(O,"type","checkbox"),U.disabled=K=!e[3].img||!e[3].img.src,u(d,"display","flex"),u(d,"flex-direction","row"),r(D,"class","tileset-preview svelte-1hjkzx2"),q(D.src,Q=(A=(T=e[3])==null?void 0:T.img)==null?void 0:A.src)||r(D,"src",Q),r(D,"alt","Merged Tileset"),u(v,"display","flex"),u(v,"flex-direction","column"),u(i,"display","flex"),u(i,"gap","16px")},m(g,m){Ee(g,i,m),a(i,s),a(s,t),a(t,n),a(s,c),a(s,f),a(i,H),a(i,w),a(w,N),a(N,k),a(w,J),a(w,p),a(i,_),a(i,v),a(v,d),a(d,E),a(E,C),a(E,Y),a(E,L),_e(L,e[3].name),a(d,Z),a(d,F),a(F,O),O.checked=e[0],a(F,ee),a(d,te),a(d,G),oe(P,G,null),a(d,ie),a(d,U),oe(S,U,null),a(v,ae),a(v,D),V=!0,ne||(fe=[R(n,"change",function(){he(e[5](e[1]))&&e[5](e[1]).apply(this,arguments)}),R(k,"change",function(){he(e[5](e[2]))&&e[5](e[2]).apply(this,arguments)}),R(L,"input",e[7]),R(O,"change",e[8]),R(G,"click",e[9]),R(U,"click",e[6])],ne=!0)},p(g,[m]){var $,x,T,A,z,I;e=g,(!V||m&2&&!q(f.src,B=(x=($=e[1])==null?void 0:$.img)==null?void 0:x.src))&&r(f,"src",B),(!V||m&4&&!q(p.src,h=(A=(T=e[2])==null?void 0:T.img)==null?void 0:A.src))&&r(p,"src",h),m&8&&L.value!==e[3].name&&_e(L,e[3].name),m&1&&(O.checked=e[0]),(!V||m&8&&K!==(K=!e[3].img||!e[3].img.src))&&(U.disabled=K),(!V||m&8&&!q(D.src,Q=(I=(z=e[3])==null?void 0:z.img)==null?void 0:I.src))&&r(D,"src",Q)},i(g){V||(ce(P.$$.fragment,g),ce(S.$$.fragment,g),V=!0)},o(g){me(P.$$.fragment,g),me(S.$$.fragment,g),V=!1},d(g){g&&y(i),ue(P),ue(S),ne=!1,Ie(fe)}}}function Me(e,i,s){let t=new X({}),n=new X({}),c=new X({}),f=!0;function B(p){if(!t.img||!n.img)return;const h=document.createElement("canvas");p?(h.width=t.img.width+n.img.width+t.spacing,h.height=Math.max(t.img.height,n.img.height)):(h.width=Math.max(t.img.width,n.img.width),h.height=t.img.height+n.img.height+t.spacing);const _=h.getContext("2d");if(!_)return;_.imageSmoothingEnabled=!1,_.resetTransform(),p?(_.drawImage(t.img,0,0),_.drawImage(n.img,t.img.width+t.spacing,0)):(_.drawImage(t.img,0,0),_.drawImage(n.img,0,t.img.height+t.spacing));const v=h.toDataURL();c.img||s(3,c.img=document.createElement("img"),c),Object.assign(c,Object.fromEntries(Object.entries(t).filter(([d,E])=>!["name","img"].includes(d)))),s(3,c.img.src=v,c)}function H(p){return h=>{if(h.target===null)return;const _=h.target.files;if(_===null)return;const v=_[0];v&&X.loadFromFile(v,p).then(()=>{s(1,t),s(2,n),console.log(t.spacing)})}}function w(){c.download()}function N(){c.name=this.value,s(3,c)}function k(){f=this.checked,s(0,f)}const J=()=>B(f);return e.$$.update=()=>{e.$$.dirty&1&&B(f)},[f,t,n,c,B,H,w,N,k,J]}class je extends be{constructor(i){super(),we(this,i,Me,De,ye,{})}}function Be(e){let i,s,t;return s=new je({}),{c(){i=l("div"),re(s.$$.fragment),this.h()},l(n){i=o(n,"DIV",{style:!0});var c=b(i);le(s.$$.fragment,c),c.forEach(y),this.h()},h(){u(i,"display","flex"),u(i,"gap","16px"),u(i,"justify-content","space-between"),u(i,"width","100%")},m(n,c){Ee(n,i,c),oe(s,i,null),t=!0},p:$e,i(n){t||(ce(s.$$.fragment,n),t=!0)},o(n){me(s.$$.fragment,n),t=!1},d(n){n&&y(i),ue(s)}}}class xe extends be{constructor(i){super(),we(this,i,null,Be,ye,{})}}export{xe as component};
