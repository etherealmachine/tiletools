import{s as ye,h as x,r as Ee,i as he,n as Te}from"../chunks/scheduler.b8ee1aee.js";import{S as be,i as Ie,g as r,s as U,m as $e,r as re,h as o,j as I,f as b,c as B,y as Le,n as Me,u as oe,k as s,l as c,a as we,x as n,A as _e,v as me,B as J,d as ce,t as ue,w as ge}from"../chunks/index.b64d0558.js";import{I as ve}from"../chunks/Icon.101b12af.js";import{T as Z}from"../chunks/Tileset.25979cb8.js";function ke(e){let a,l,t,i,g,f,N,K,w,V,k,Q,d,p,h,_,v,E,P,fe="Name",ee,D,te,G,F,ae,ne,R,S,ie,H,z,X,se,j,Y,A,le,de;return S=new ve({props:{name:"gitMerge"}}),z=new ve({props:{name:"saveFloppyDisk"}}),{c(){a=r("div"),l=r("div"),t=r("label"),i=r("input"),g=U(),f=r("img"),K=U(),w=r("div"),V=r("label"),k=r("input"),Q=U(),d=r("img"),h=U(),_=r("div"),v=r("div"),E=r("div"),P=r("label"),P.textContent=fe,ee=U(),D=r("input"),te=U(),G=r("label"),F=r("input"),ae=$e(`
        Landscape`),ne=U(),R=r("button"),re(S.$$.fragment),ie=U(),H=r("button"),re(z.$$.fragment),se=U(),j=r("img"),this.h()},l(u){a=o(u,"DIV",{style:!0});var m=I(a);l=o(m,"DIV",{style:!0});var T=I(l);t=o(T,"LABEL",{for:!0});var C=I(t);i=o(C,"INPUT",{name:!0,type:!0,accept:!0}),C.forEach(b),g=B(T),f=o(T,"IMG",{class:!0,src:!0,alt:!0}),T.forEach(b),K=B(m),w=o(m,"DIV",{style:!0});var $=I(w);V=o($,"LABEL",{for:!0});var O=I(V);k=o(O,"INPUT",{name:!0,type:!0,accept:!0}),O.forEach(b),Q=B($),d=o($,"IMG",{class:!0,src:!0,alt:!0}),$.forEach(b),h=B(m),_=o(m,"DIV",{style:!0});var L=I(_);v=o(L,"DIV",{style:!0});var y=I(v);E=o(y,"DIV",{style:!0});var M=I(E);P=o(M,"LABEL",{for:!0,"data-svelte-h":!0}),Le(P)!=="svelte-bs9sy6"&&(P.textContent=fe),ee=B(M),D=o(M,"INPUT",{name:!0,type:!0}),M.forEach(b),te=B(y),G=o(y,"LABEL",{});var q=I(G);F=o(q,"INPUT",{type:!0}),ae=Me(q,`
        Landscape`),q.forEach(b),ne=B(y),R=o(y,"BUTTON",{});var W=I(R);oe(S.$$.fragment,W),W.forEach(b),ie=B(y),H=o(y,"BUTTON",{});var pe=I(H);oe(z.$$.fragment,pe),pe.forEach(b),y.forEach(b),se=B(L),j=o(L,"IMG",{class:!0,src:!0,alt:!0}),L.forEach(b),m.forEach(b),this.h()},h(){var u,m,T,C,$,O,L,y,M;s(i,"name","left"),s(i,"type","file"),s(i,"accept","image/png"),s(t,"for","left"),s(f,"class","tileset-preview svelte-1hjkzx2"),x(f.src,N=((u=e[1])==null?void 0:u.img)instanceof HTMLImageElement?(T=(m=e[1])==null?void 0:m.img)==null?void 0:T.src:"")||s(f,"src",N),s(f,"alt","Left Tileset"),c(l,"display","flex"),c(l,"flex-direction","column"),s(k,"name","right"),s(k,"type","file"),s(k,"accept","image/png"),s(V,"for","right"),s(d,"class","tileset-preview svelte-1hjkzx2"),x(d.src,p=((C=e[2])==null?void 0:C.img)instanceof HTMLImageElement?(O=($=e[2])==null?void 0:$.img)==null?void 0:O.src:"")||s(d,"src",p),s(d,"alt","Right Tileset"),c(w,"display","flex"),c(w,"flex-direction","column"),s(P,"for","name"),s(D,"name","name"),s(D,"type","text"),c(E,"display","flex"),c(E,"flex-direction","column"),c(E,"align-items","start"),s(F,"type","checkbox"),H.disabled=X=!e[3].img,c(v,"display","flex"),c(v,"flex-direction","row"),s(j,"class","tileset-preview svelte-1hjkzx2"),x(j.src,Y=((L=e[3])==null?void 0:L.img)instanceof HTMLImageElement?(M=(y=e[3])==null?void 0:y.img)==null?void 0:M.src:"")||s(j,"src",Y),s(j,"alt","Merged Tileset"),c(_,"display","flex"),c(_,"flex-direction","column"),c(a,"display","flex"),c(a,"gap","16px")},m(u,m){we(u,a,m),n(a,l),n(l,t),n(t,i),n(l,g),n(l,f),n(a,K),n(a,w),n(w,V),n(V,k),n(w,Q),n(w,d),n(a,h),n(a,_),n(_,v),n(v,E),n(E,P),n(E,ee),n(E,D),_e(D,e[3].name),n(v,te),n(v,G),n(G,F),F.checked=e[0],n(G,ae),n(v,ne),n(v,R),me(S,R,null),n(v,ie),n(v,H),me(z,H,null),n(_,se),n(_,j),A=!0,le||(de=[J(i,"change",function(){he(e[5](e[1]))&&e[5](e[1]).apply(this,arguments)}),J(k,"change",function(){he(e[5](e[2]))&&e[5](e[2]).apply(this,arguments)}),J(D,"input",e[7]),J(F,"change",e[8]),J(R,"click",e[9]),J(H,"click",e[6])],le=!0)},p(u,[m]){var T,C,$,O,L,y,M,q,W;e=u,(!A||m&2&&!x(f.src,N=((T=e[1])==null?void 0:T.img)instanceof HTMLImageElement?($=(C=e[1])==null?void 0:C.img)==null?void 0:$.src:""))&&s(f,"src",N),(!A||m&4&&!x(d.src,p=((O=e[2])==null?void 0:O.img)instanceof HTMLImageElement?(y=(L=e[2])==null?void 0:L.img)==null?void 0:y.src:""))&&s(d,"src",p),m&8&&D.value!==e[3].name&&_e(D,e[3].name),m&1&&(F.checked=e[0]),(!A||m&8&&X!==(X=!e[3].img))&&(H.disabled=X),(!A||m&8&&!x(j.src,Y=((M=e[3])==null?void 0:M.img)instanceof HTMLImageElement?(W=(q=e[3])==null?void 0:q.img)==null?void 0:W.src:""))&&s(j,"src",Y)},i(u){A||(ce(S.$$.fragment,u),ce(z.$$.fragment,u),A=!0)},o(u){ue(S.$$.fragment,u),ue(z.$$.fragment,u),A=!1},d(u){u&&b(a),ge(S),ge(z),le=!1,Ee(de)}}}function De(e,a,l){let t=new Z({}),i=new Z({}),g=new Z({}),f=!0;function N(d){if(!t.img||!i.img)return;const p=document.createElement("canvas");d?(p.width=t.img.width+i.img.width+t.spacing,p.height=Math.max(t.img.height,i.img.height)):(p.width=Math.max(t.img.width,i.img.width),p.height=t.img.height+i.img.height+t.spacing);const h=p.getContext("2d");h&&(h.imageSmoothingEnabled=!1,h.resetTransform(),d?(h.drawImage(t.img,0,0),h.drawImage(i.img,t.img.width+t.spacing,0)):(h.drawImage(t.img,0,0),h.drawImage(i.img,0,t.img.height+t.spacing)),g.setImageFromDataURL(p.toDataURL()),Object.assign(g,Object.fromEntries(Object.entries(t).filter(([_,v])=>!["name","img"].includes(_)))))}function K(d){return p=>{if(p.target===null)return;const h=p.target.files;if(h===null)return;const _=h[0];_&&Z.loadFromFile(_,d).then(()=>{l(1,t),l(2,i),console.log(t.spacing)})}}function w(){g.download()}function V(){g.name=this.value,l(3,g)}function k(){f=this.checked,l(0,f)}const Q=()=>N(f);return e.$$.update=()=>{e.$$.dirty&1&&N(f)},[f,t,i,g,N,K,w,V,k,Q]}class je extends be{constructor(a){super(),Ie(this,a,De,ke,ye,{})}}function Ue(e){let a,l,t;return l=new je({}),{c(){a=r("div"),re(l.$$.fragment),this.h()},l(i){a=o(i,"DIV",{style:!0});var g=I(a);oe(l.$$.fragment,g),g.forEach(b),this.h()},h(){c(a,"display","flex"),c(a,"gap","16px"),c(a,"justify-content","space-between"),c(a,"width","100%")},m(i,g){we(i,a,g),me(l,a,null),t=!0},p:Te,i(i){t||(ce(l.$$.fragment,i),t=!0)},o(i){ue(l.$$.fragment,i),t=!1},d(i){i&&b(a),ge(l)}}}class Ae extends be{constructor(a){super(),Ie(this,a,null,Ue,ye,{})}}export{Ae as component};
